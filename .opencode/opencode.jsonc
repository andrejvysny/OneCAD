{
  "$schema": "https://opencode.ai/config.json",


  // Permission configuration (safe-by-default for CAD)
  "permission": {
    "*": "ask",
    "edit": "allow",
    "webfetch": "allow",
    "external_directory": "ask",
    "doom_loop": "deny",

    "bash": {
      "*": "ask",
      // Build toolchain - safe, allow
      "git *": "allow",
      "cmake *": "allow",
      "ninja *": "allow",
      "make *": "allow",
      "ctest *": "allow",
      // Formatting - safe
      "clang-format *": "allow",
      // Linting - can be slow, ask
      "clang-tidy *": "ask",
      // Prototype execution - allow (test runners)
      "./tests/*": "allow",
      "./build/tests/*": "allow",
      // App launch - ask (interactive)
      "./OneCAD": "ask",
      "./build/OneCAD": "ask",
      // Dangerous commands - deny
      "rm *": "deny",
      "sudo *": "deny",
      "rm -rf *": "deny"
    }
  },

  "watcher": {
    "ignore": [
      "build/**",
      "**/build/**",
      "third_party/**",
      ".opencode/**",
      ".claude/**"
    ]
  },

  "lsp": {
    "clangd": {
      "command": [
        "clangd",
        "--header-insertion=never",
        "--clang-tidy",
        "--completion-style=detailed"
      ],
      "extensions": [
        ".c",
        ".cc",
        ".cpp",
        ".cxx",
        ".h",
        ".hpp",
        ".hh"
      ]
    }
  }

}
