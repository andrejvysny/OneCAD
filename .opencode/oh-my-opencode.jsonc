{
  "$schema": "https://raw.githubusercontent.com/code-yeongyu/oh-my-opencode/master/assets/oh-my-opencode.schema.json",

  // ═══════════════════════════════════════════
  // AGENT DOMAIN KNOWLEDGE (prompt_append only)
  // ═══════════════════════════════════════════
  "agents": {
    "sisyphus": {
      "prompt_append": "OneCAD C++ CAD app context:\n- Non-standard coords: Sketch X→World Y+, Sketch Y→World X-\n- EntityID = UUID string\n- OCCT Handle<> always null-check before use\n- PlaneGCS uses direct parameter binding\n- Run proto_* tests to validate changes"
    },
    "prometheus": {
      "prompt_append": "OneCAD planning context:\n1. Layers: UI→Render→Core→Kernel\n2. Check ElementMap impact (topological naming hash stability)\n3. Verify PlaneGCS solver integration\n4. List required proto_* tests\n5. Flag coordinate system implications\n6. Note: STEP I/O and undo/redo not fully wired"
    },
    "atlas": {
      "prompt_append": "OneCAD orchestration:\n- Run proto_elementmap_rigorous BEFORE kernel changes\n- Run proto_sketch_solver AFTER constraint changes\n- Verify clangd diagnostics after edits\n- Delegate complex geometry to 'ultrabrain'\n- Delegate sketch math to 'sketching'"
    },
    "oracle": {
      "prompt_append": "OneCAD architecture review:\n1. Topological naming (ElementMap descriptor hash stability)\n2. OCCT Handle<> null checks (crash prevention)\n3. PlaneGCS parameter binding correctness\n4. Qt/OpenGL thread safety (QueuedConnection for cross-thread)\n5. Geometric numerical robustness\n6. Memory ownership (unique_ptr preferred)"
    },
    "explore": {
      "permission": { "edit": "deny", "bash": "ask", "webfetch": "allow" },
      "prompt_append": "OneCAD paths:\n- Sketch: src/core/sketch/ (entities, tools, constraints, solver)\n- Kernel: src/kernel/elementmap/\n- Render: src/render/, src/core/sketch/SketchRenderer.h\n- UI: src/ui/viewport/, src/ui/mainwindow/\n- Tests: tests/proto_*"
    },
    "librarian": {
      "prompt_append": "OneCAD external docs:\n1. OpenCASCADE (OCCT) - BRep, Handle<>, TopoDS_*\n2. PlaneGCS constraint solver patterns\n3. Qt6 OpenGL integration\n4. CAD parametric modeling references\n5. Eigen3 linear algebra"
    },
    "metis": {
      "prompt_append": "OneCAD gap analysis:\n- Missing proto_* test coverage\n- Unhandled OCCT exceptions\n- Solver convergence edge cases\n- Coordinate system transformation bugs\n- ElementMap hash collision risks"
    },
    "momus": {
      "prompt_append": "OneCAD plan review:\n- ElementMap regression risk (hash changes = ID remapping)\n- Solver constraint completeness (15 types)\n- OpenGL state leaks (bind/unbind pairs)\n- Memory ownership clarity (raw new without parent)"
    }
  },

  // ═══════════════════════════════════════════
  // CAD-SPECIFIC CATEGORIES
  // ═══════════════════════════════════════════
  "categories": {
    // Complex algorithms - use global ultrabrain + CAD context
    "ultrabrain": {
      "prompt_append": "OneCAD complex algorithm:\n- Numerical algorithms (solver convergence, tessellation precision)\n- Graph algorithms (LoopDetector DFS cycles, point-in-polygon)\n- OCCT Boolean operation edge cases\n- ElementMap descriptor hashing (14 fields)"
    },

    // Geometry/kernel work
    "geometry-kernel": {
      "model": "openai/gpt-5.3-codex",
      "variant": "high",
      "temperature": 0.1,
      "prompt_append": "Geometry/kernel specialist:\n- OCCT BRep (TopoDS_*, BRepBuilderAPI_*, BRepAlgoAPI_*)\n- ElementMap topological naming (src/kernel/elementmap/)\n- Shape evolution (Modified/Generated/Deleted)\n- Boolean operations correctness\n- Always null-check Handle<> objects"
    },

    // Sketch engine work
    "sketching": {
      "model": "openai/gpt-5.3-codex",
      "variant": "high",
      "temperature": 0.1,
      "prompt_append": "Sketching specialist:\n- PlaneGCS solver (src/core/sketch/solver/ConstraintSolver.cpp 1014 LOC)\n- 15 constraint types (src/core/sketch/constraints/Constraints.h)\n- SnapManager (2mm radius, priority: Vertex>Endpoint>Midpoint>Center>Quadrant>Intersection>Grid)\n- AutoConstrainer (±5° for H/V, 2mm for coincident)\n- CRITICAL: Non-standard SketchPlane::XY() mapping"
    },

    // Rendering/viewport work
    "rendering": {
      "model": "openai/gpt-5.3-codex",
      "temperature": 0.2,
      "prompt_append": "Rendering specialist:\n- OpenGL 4.1 Core Profile\n- Camera3D orbit/pan/zoom (missing inertia = known)\n- Grid3D (fixed 10mm, shader-based)\n- SketchRenderer (1903 LOC) + BodyRenderer (727 LOC)\n- Viewport picking and selection\n- Ensure GL state bind/unbind pairs"
    },

    // Qt UI work
    "visual-engineering": {
      "prompt_append": "Qt6 UI specialist:\n- MainWindow (2047 LOC), Viewport (3146 LOC)\n- ModelNavigator, ContextToolbar, panels\n- ThemeManager (Light/Dark)\n- Qt signal/slot (QueuedConnection for cross-thread)\n- Parent ownership for QObject lifetimes"
    },

    // Performance profiling
    "perf-profiling": {
      "model": "openai/gpt-5.1-codex-mini",
      "temperature": 0.1,
      "prompt_append": "OneCAD perf:\n- Viewport render loop frame-time\n- Avoid per-frame allocations\n- TessellationCache reuse\n- Solver hot paths\n- Evidence-based profiling"
    },

    // Build/CMake
    "build-cmake": {
      "model": "openai/gpt-5.1-codex-mini",
      "temperature": 0.2,
      "prompt_append": "CMake specialist:\n- CMake 3.25+ C++20\n- Qt6 AUTOMOC/AUTORCC/AUTOUIC\n- OCCT and Eigen3 detection\n- Ninja generator + compile_commands.json\n- macOS bundle configuration"
    },

    // Tests
    "tests": {
      "model": "openai/gpt-5.1-codex-mini",
      "temperature": 0.2,
      "prompt_append": "Test specialist:\n- Prototype executables (no ctest framework yet)\n- proto_elementmap_rigorous - REQUIRED for kernel changes\n- proto_sketch_geometry, proto_sketch_constraints, proto_sketch_solver\n- proto_loop_detector, proto_face_builder\n- proto_regeneration (10.8KB - extensive)"
    },

    // Quick fixes (inherit global)
    "quick": {
      "prompt_append": "OneCAD quick fix. Keep minimal, verify with clangd."
    }
  }
}
